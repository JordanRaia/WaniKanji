<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>WaniKanji — Practice Kanji by Level</title>
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <link rel="icon" type="image/x-icon" href="/favicon.ico" />
        <link
            href="https://cdn.jsdelivr.net/npm/daisyui@4.4.19/dist/full.min.css"
            rel="stylesheet"
            type="text/css"
        />
        <script src="https://cdn.tailwindcss.com"></script>
        <style>
            /* WaniKani-style badges for mnemonics using DaisyUI theme colors */
            .radical,
            radical {
                background-color: oklch(var(--in));
                color: oklch(var(--inc));
                padding: 2px 6px;
                border-radius: 4px;
                font-weight: 500;
                display: inline-block;
                margin: 0 2px;
            }

            .kanji,
            kanji {
                background-color: oklch(var(--s));
                color: oklch(var(--sc));
                padding: 2px 6px;
                border-radius: 4px;
                font-weight: 500;
                display: inline-block;
                margin: 0 2px;
            }

            .vocabulary,
            vocabulary {
                background-color: oklch(var(--a));
                color: oklch(var(--ac));
                padding: 2px 6px;
                border-radius: 4px;
                font-weight: 500;
                display: inline-block;
                margin: 0 2px;
            }

            .reading,
            reading {
                background-color: oklch(var(--b3));
                color: oklch(var(--bc));
                padding: 2px 6px;
                border-radius: 4px;
                font-weight: 500;
                display: inline-block;
                margin: 0 2px;
            }

            .ja,
            ja {
                font-style: normal;
            }
        </style>
        <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    </head>
    <body class="bg-base-200 min-h-screen">
        <div class="container mx-auto px-4 py-8 max-w-4xl">
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-base-content mb-2">
                    WaniKanji
                </h1>
                <p class="text-base-content/70">
                    Practice just the kanji per level.
                </p>
            </div>

            <div class="card bg-base-100 shadow-xl" id="setup">
                <div class="card-body">
                    <h2 class="card-title text-2xl mb-4">Setup</h2>

                    <div class="form-control w-full mb-4">
                        <label class="label">
                            <span class="label-text">WaniKani API Token</span>
                        </label>
                        <input
                            id="token"
                            type="password"
                            placeholder="Paste your WaniKani API token here"
                            class="input input-bordered w-full"
                        />
                        <label class="label">
                            <span class="label-text-alt text-base-content/70"
                                >Token is saved locally and used only for this
                                session.</span
                            >
                        </label>
                        <div class="text-sm text-base-content/70 mt-2">
                            Need a token?
                            <a
                                href="https://www.wanikani.com/settings/personal_access_tokens"
                                target="_blank"
                                class="link link-primary hover:link-hover"
                            >
                                Get your API token here
                            </a>
                            <br />
                            <span class="text-xs"
                                >No additional permissions needed. This app only
                                uses GET requests.</span
                            >
                        </div>
                    </div>

                    <div class="flex flex-col sm:flex-row gap-4 mb-4">
                        <div class="form-control w-full sm:w-32">
                            <label class="label">
                                <span class="label-text">Level</span>
                            </label>
                            <div id="levelSkeleton" class="hidden">
                                <div class="skeleton h-12 w-full"></div>
                            </div>
                            <input
                                id="level"
                                type="number"
                                min="1"
                                max="60"
                                value="1"
                                class="input input-bordered"
                            />
                        </div>

                        <div class="flex flex-col gap-2 sm:flex-1">
                            <div class="form-control w-full">
                                <label
                                    class="label cursor-pointer justify-start gap-2"
                                >
                                    <input
                                        type="checkbox"
                                        id="modeEnglishToKanjiToggle"
                                        class="checkbox checkbox-warning"
                                    />
                                    <span class="label-text"
                                        >English Meaning → Japanese
                                        Reading</span
                                    >
                                </label>
                            </div>

                            <div class="form-control w-full">
                                <label
                                    class="label cursor-pointer justify-start gap-2"
                                >
                                    <input
                                        type="checkbox"
                                        id="modeToggle"
                                        class="checkbox"
                                        data-color-class="meaning"
                                        checked
                                    />
                                    <span class="label-text"
                                        >Kanji → English Meaning</span
                                    >
                                </label>
                            </div>

                            <div class="form-control w-full">
                                <label
                                    class="label cursor-pointer justify-start gap-2"
                                >
                                    <input
                                        type="checkbox"
                                        id="readingToggle"
                                        class="checkbox"
                                        data-color-class="reading"
                                        checked
                                    />
                                    <span class="label-text"
                                        >Kanji → Japanese Reading</span
                                    >
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4">
                        <div class="form-control w-full">
                            <label
                                class="label cursor-pointer justify-start gap-2"
                            >
                                <input
                                    type="checkbox"
                                    id="srsFilterToggle"
                                    class="checkbox checkbox-info"
                                />
                                <span class="label-text"
                                    >Exclude Guru+ kanji</span
                                >
                            </label>
                            <label class="label">
                                <span
                                    class="label-text-alt text-base-content/70"
                                    >Filters out kanji at Guru rank or higher.
                                    Includes never-unlocked kanji.</span
                                >
                            </label>
                        </div>

                        <div class="form-control w-full">
                            <label
                                class="label cursor-pointer justify-start gap-2"
                            >
                                <input
                                    type="checkbox"
                                    id="unlockedOnlyToggle"
                                    class="checkbox checkbox-secondary"
                                />
                                <span class="label-text"
                                    >Exclude locked kanji</span
                                >
                            </label>
                            <label class="label">
                                <span
                                    class="label-text-alt text-base-content/70"
                                    >Only shows kanji you have unlocked in
                                    WaniKani. Excludes locked kanji.</span
                                >
                            </label>
                        </div>
                    </div>

                    <div class="card-actions flex-col gap-4">
                        <div class="flex flex-col sm:flex-row gap-2 w-full">
                            <button id="startAllBtn" class="btn btn-success">
                                Start Quiz with All
                            </button>
                            <button id="selectKanjiBtn" class="btn btn-info">
                                Select Kanji for Quiz
                            </button>
                            <button
                                id="selectLessonBtn"
                                class="btn btn-warning"
                            >
                                Select Kanji for Lessons
                            </button>
                            <button id="learnKanjiBtn" class="btn btn-accent">
                                Learn Kanji
                            </button>
                        </div>
                        <div
                            id="setupMsg"
                            class="text-sm text-error break-words w-full"
                        ></div>
                    </div>
                </div>
            </div>

            <div id="selectionArea" class="hidden mt-6">
                <div class="card bg-base-100 shadow-xl">
                    <div class="card-body">
                        <h2 class="card-title text-2xl mb-4">
                            Select Kanji to Quiz
                        </h2>

                        <div class="flex justify-between items-center mb-4">
                            <div class="text-sm text-base-content/70">
                                <span id="selectedCount">0</span> /
                                <span id="totalKanjiCount">0</span> kanji
                                selected
                            </div>
                            <div class="flex gap-2">
                                <button
                                    id="selectAllBtn"
                                    class="btn btn-sm btn-outline"
                                >
                                    Select All
                                </button>
                                <button
                                    id="deselectAllBtn"
                                    class="btn btn-sm btn-outline"
                                >
                                    Deselect All
                                </button>
                            </div>
                        </div>

                        <div
                            id="kanjiGrid"
                            class="grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 gap-3 mb-6 max-h-96 overflow-y-auto p-4 bg-base-200 rounded-lg"
                        >
                            <!-- Kanji checkboxes will be populated here -->
                        </div>

                        <div class="card-actions justify-between">
                            <button
                                id="backToSetupFromSelection"
                                class="btn btn-outline"
                            >
                                ← Back to Setup
                            </button>
                            <button
                                id="startSelectedBtn"
                                class="btn btn-primary"
                            >
                                Start Quiz
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="lessonSelectionArea" class="hidden mt-6">
                <div class="card bg-base-100 shadow-xl">
                    <div class="card-body">
                        <h2 class="card-title text-2xl mb-4">
                            Select Kanji for Lessons
                        </h2>

                        <div class="flex justify-between items-center mb-4">
                            <div class="text-sm text-base-content/70">
                                <span id="lessonSelectedCount">0</span> /
                                <span id="lessonTotalKanjiCount">0</span> kanji
                                selected
                            </div>
                            <div class="flex gap-2">
                                <button
                                    id="lessonSelectAllBtn"
                                    class="btn btn-sm btn-outline"
                                >
                                    Select All
                                </button>
                                <button
                                    id="lessonDeselectAllBtn"
                                    class="btn btn-sm btn-outline"
                                >
                                    Deselect All
                                </button>
                            </div>
                        </div>

                        <div
                            id="lessonKanjiGrid"
                            class="grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 gap-3 mb-6 max-h-96 overflow-y-auto p-4 bg-base-200 rounded-lg"
                        >
                            <!-- Kanji checkboxes will be populated here -->
                        </div>

                        <div class="card-actions justify-between">
                            <button
                                id="backToSetupFromLessonSelection"
                                class="btn btn-outline"
                            >
                                ← Back to Setup
                            </button>
                            <button
                                id="startLessonsBtn"
                                class="btn btn-warning"
                            >
                                Start Lessons
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="lessonArea" class="hidden mt-6">
                <div class="card bg-base-100 shadow-xl">
                    <div class="card-body">
                        <div
                            class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6"
                        >
                            <div>
                                <div
                                    class="text-2xl font-bold text-warning"
                                    id="lessonProgress"
                                >
                                    Lesson 1 / 1
                                </div>
                                <div class="text-sm text-base-content/70">
                                    Use ← → or Enter to navigate
                                </div>
                            </div>
                            <button
                                id="backToSetupFromLesson"
                                class="btn btn-outline btn-sm"
                            >
                                ← Back to Setup
                            </button>
                        </div>

                        <!-- Loading Skeleton -->
                        <div id="lessonLoadingSkeleton" class="hidden">
                            <div class="text-center mb-8">
                                <div
                                    class="skeleton h-32 w-32 mx-auto mb-4"
                                ></div>
                                <div class="skeleton h-4 w-32 mx-auto"></div>
                            </div>
                            <div class="space-y-6">
                                <div
                                    class="card bg-success/10 border border-success/20"
                                >
                                    <div class="card-body">
                                        <div
                                            class="skeleton h-6 w-24 mb-3"
                                        ></div>
                                        <div
                                            class="skeleton h-6 w-full mb-2"
                                        ></div>
                                        <div class="skeleton h-20 w-full"></div>
                                    </div>
                                </div>
                                <div
                                    class="card bg-primary/10 border border-primary/20"
                                >
                                    <div class="card-body">
                                        <div
                                            class="skeleton h-6 w-24 mb-3"
                                        ></div>
                                        <div
                                            class="skeleton h-6 w-full mb-2"
                                        ></div>
                                        <div class="skeleton h-20 w-full"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Lesson Content -->
                        <div id="lessonContent">
                            <div class="text-center mb-8">
                                <div
                                    class="text-6xl sm:text-7xl lg:text-9xl text-white mb-4"
                                    id="lessonKanjiDisplay"
                                ></div>
                                <a
                                    id="lessonWanikaniLink"
                                    href="#"
                                    target="_blank"
                                    class="link link-primary text-sm"
                                >
                                    View on WaniKani →
                                </a>
                            </div>

                            <div class="space-y-6">
                                <!-- Meaning Section -->
                                <div
                                    class="card bg-success/10 border border-success/20"
                                >
                                    <div class="card-body">
                                        <h3
                                            class="card-title text-success text-lg mb-2"
                                        >
                                            Meaning
                                        </h3>
                                        <div
                                            id="lessonMeanings"
                                            class="text-xl font-semibold mb-3"
                                        ></div>
                                        <div
                                            id="lessonMeaningMnemonic"
                                            class="text-base-content/80 leading-relaxed"
                                        ></div>
                                    </div>
                                </div>

                                <!-- Reading Section -->
                                <div
                                    class="card bg-primary/10 border border-primary/20"
                                >
                                    <div class="card-body">
                                        <h3
                                            class="card-title text-primary text-lg mb-2"
                                        >
                                            Reading
                                        </h3>
                                        <div
                                            id="lessonReadings"
                                            class="text-xl font-semibold mb-3"
                                        ></div>
                                        <div
                                            id="lessonReadingMnemonic"
                                            class="text-base-content/80 leading-relaxed"
                                        ></div>
                                    </div>
                                </div>

                                <!-- Radicals and Visually Similar Kanji - Side by Side -->
                                <div
                                    id="similarAndRadicalsContainer"
                                    class="grid grid-cols-1 lg:grid-cols-2 gap-4 hidden"
                                >
                                    <!-- Component Radicals Section -->
                                    <div
                                        id="componentRadicalsSection"
                                        class="card bg-info/10 border border-info/20 hidden"
                                    >
                                        <div class="card-body">
                                            <h3
                                                class="card-title text-info text-lg mb-2"
                                            >
                                                Radicals
                                            </h3>
                                            <div
                                                id="componentRadicals"
                                                class="flex flex-wrap gap-3"
                                            ></div>
                                        </div>
                                    </div>

                                    <!-- Visually Similar Kanji Section -->
                                    <div
                                        id="visuallySimilarSection"
                                        class="card bg-info/10 border border-info/20 hidden"
                                    >
                                        <div class="card-body">
                                            <h3
                                                class="card-title text-info text-lg mb-2"
                                            >
                                                Visually Similar Kanji
                                            </h3>
                                            <div
                                                id="visuallySimilarKanji"
                                                class="flex flex-wrap gap-3"
                                            ></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="flex justify-between mt-6">
                                <button
                                    id="previousLessonBtn"
                                    class="btn btn-outline"
                                >
                                    ← Previous
                                </button>
                                <button
                                    id="nextLessonBtn"
                                    class="btn btn-primary"
                                >
                                    Next →
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="lessonCompletionArea" class="hidden mt-6">
                <div class="card bg-base-100 shadow-xl">
                    <div class="card-body text-center">
                        <h2 class="card-title text-3xl mb-4 justify-center">
                            Lessons Complete!
                        </h2>

                        <p class="text-lg text-base-content/70 mb-6">
                            You've finished all
                            <span id="completedLessonCount" class="font-bold"
                                >0</span
                            >
                            lessons. Ready to test your knowledge?
                        </p>

                        <div
                            class="card-actions justify-center gap-2 flex-wrap"
                        >
                            <button
                                id="startQuizFromLessons"
                                class="btn btn-success btn-lg"
                            >
                                Quiz These Kanji
                            </button>
                            <button
                                id="reviewLessonsAgain"
                                class="btn btn-warning btn-lg"
                            >
                                Review Lessons Again
                            </button>
                            <button
                                id="backToSetupFromLessonCompletion"
                                class="btn btn-outline btn-lg"
                            >
                                Back to Setup
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="quizArea" class="hidden mt-6">
                <div class="card bg-base-100 shadow-xl">
                    <div class="card-body">
                        <div
                            class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6"
                        >
                            <div>
                                <div
                                    class="text-2xl font-bold text-primary"
                                    id="progress"
                                >
                                    0 remaining
                                </div>
                                <div
                                    class="text-sm text-base-content/70"
                                    id="modeLabel"
                                >
                                    Mode: Kanji → English
                                </div>
                            </div>
                            <div class="flex flex-wrap gap-2">
                                <button
                                    id="backBtn"
                                    class="btn btn-outline btn-sm"
                                >
                                    ← Back
                                </button>
                                <button
                                    id="exportBtn"
                                    class="btn btn-outline btn-sm"
                                >
                                    Export
                                </button>
                            </div>
                        </div>

                        <div id="question" class="text-center mb-8">
                            <div
                                class="text-6xl sm:text-7xl lg:text-9xl text-center my-2.5 break-words"
                                id="kanjiDisplay"
                            ></div>
                            <div
                                id="modeLabelUnderKanji"
                                class="text-sm font-medium px-3 py-1 rounded-full inline-block mb-2"
                            ></div>
                            <div
                                id="meaningDisplay"
                                class="text-lg text-base-content/80"
                            ></div>
                        </div>

                        <div class="form-control mb-6">
                            <div class="flex flex-col sm:flex-row gap-2">
                                <input
                                    id="answer"
                                    type="text"
                                    placeholder="Type your answer here"
                                    autocomplete="off"
                                    class="input input-bordered flex-1"
                                />
                                <button
                                    id="checkBtn"
                                    class="btn btn-primary w-full sm:w-auto"
                                >
                                    Answer
                                </button>
                                <button
                                    id="continueBtn"
                                    class="btn btn-success hidden w-full sm:w-auto"
                                >
                                    Continue
                                </button>
                            </div>
                        </div>

                        <div id="result" class="mb-4 hidden"></div>
                        <div
                            id="correctBox"
                            class="bg-base-200 p-3 rounded mb-4 hidden"
                        ></div>

                        <div class="text-sm text-base-content/70 text-center">
                            Wrong answers will be cycled back in. Refresh to
                            restart.<br />
                            <strong>Keyboard shortcuts:</strong> Enter to
                            check/continue
                        </div>
                    </div>
                </div>
            </div>

            <div id="completionArea" class="hidden mt-6">
                <div class="card bg-base-100 shadow-xl">
                    <div class="card-body text-center">
                        <h2 class="card-title text-3xl mb-4 justify-center">
                            Quiz Complete!
                        </h2>

                        <div
                            class="stats stats-vertical lg:stats-horizontal shadow mb-6"
                        >
                            <div class="stat">
                                <div class="stat-title">Total Questions</div>
                                <div
                                    class="stat-value text-primary"
                                    id="totalQuestions"
                                >
                                    0
                                </div>
                            </div>
                            <div class="stat">
                                <div class="stat-title">
                                    Correct (First Try)
                                </div>
                                <div
                                    class="stat-value text-success"
                                    id="correctAnswers"
                                >
                                    0
                                </div>
                            </div>
                            <div class="stat">
                                <div class="stat-title">
                                    Incorrect (At Least Once)
                                </div>
                                <div
                                    class="stat-value text-error"
                                    id="incorrectAnswers"
                                >
                                    0
                                </div>
                            </div>
                        </div>

                        <div class="card-actions justify-center gap-2">
                            <button
                                id="restartBtn"
                                class="btn btn-primary btn-lg"
                            >
                                Try Again
                            </button>
                            <button
                                id="quizIncorrectBtn"
                                class="btn btn-warning btn-lg"
                            >
                                Quiz Incorrect Answers
                            </button>
                            <button
                                id="backToSetupBtn"
                                class="btn btn-outline btn-lg"
                            >
                                Back to Setup
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Kanji Results Card -->
                <div class="card bg-base-100 shadow-xl mt-4">
                    <div class="card-body">
                        <h3 class="card-title text-xl mb-4 justify-center">
                            Kanji Results
                        </h3>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                            <!-- Correct Kanji -->
                            <div
                                class="card bg-success/10 border border-success/20"
                            >
                                <div class="card-body p-4">
                                    <h4
                                        class="card-title text-success text-lg mb-3"
                                    >
                                        Correct Kanji
                                    </h4>
                                    <div
                                        id="correctKanjiList"
                                        class="text-sm max-h-64 overflow-y-auto"
                                    >
                                        <!-- Will be populated by JavaScript -->
                                    </div>
                                </div>
                            </div>

                            <!-- Incorrect Kanji -->
                            <div
                                class="card bg-error/10 border border-error/20"
                            >
                                <div class="card-body p-4">
                                    <h4
                                        class="card-title text-error text-lg mb-3"
                                    >
                                        Incorrect Kanji
                                    </h4>
                                    <div
                                        id="incorrectKanjiList"
                                        class="text-sm max-h-64 overflow-y-auto"
                                    >
                                        <!-- Will be populated by JavaScript -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="learnKanjiSelectionArea" class="hidden mt-6">
                <div class="card bg-base-100 shadow-xl">
                    <div class="card-body">
                        <h2 class="card-title text-2xl mb-4">
                            Select Kanji to Learn
                        </h2>

                        <div class="flex justify-between items-center mb-4">
                            <div class="text-sm text-base-content/70">
                                <span id="learnKanjiSelectedCount">0</span> /
                                <span id="learnKanjiTotalCount">0</span> kanji
                                selected
                            </div>
                            <div class="flex gap-2">
                                <button
                                    id="learnKanjiSelectAllBtn"
                                    class="btn btn-sm btn-outline"
                                >
                                    Select All
                                </button>
                                <button
                                    id="learnKanjiDeselectAllBtn"
                                    class="btn btn-sm btn-outline"
                                >
                                    Deselect All
                                </button>
                            </div>
                        </div>

                        <div
                            id="learnKanjiGrid"
                            class="grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 gap-3 mb-6 max-h-96 overflow-y-auto p-4 bg-base-200 rounded-lg"
                        >
                            <!-- Kanji checkboxes will be populated here -->
                        </div>

                        <div class="card-actions justify-between">
                            <button
                                id="backToSetupFromLearnSelection"
                                class="btn btn-outline"
                            >
                                ← Back to Setup
                            </button>
                            <button
                                id="startLearnKanjiBtn"
                                class="btn btn-accent"
                            >
                                Start Learning
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="learnModeProgressArea" class="hidden mt-6">
                <div class="card bg-base-100 shadow-xl">
                    <div class="card-body text-center">
                        <div class="badge badge-accent badge-lg mb-2">
                            Learning Mode
                        </div>
                        <h2 class="card-title text-3xl mb-4 justify-center">
                            Ready for Lessons?
                        </h2>

                        <div
                            class="stats stats-vertical lg:stats-horizontal shadow mb-6"
                        >
                            <div class="stat">
                                <div class="stat-title">Current Batch</div>
                                <div
                                    class="stat-value text-accent"
                                    id="learnCurrentBatch"
                                >
                                    1
                                </div>
                                <div class="stat-desc" id="learnBatchInfo">
                                    5 kanji in this batch
                                </div>
                            </div>
                            <div class="stat">
                                <div class="stat-title">Already Learned</div>
                                <div
                                    class="stat-value text-success"
                                    id="learnAlreadyLearned"
                                >
                                    0
                                </div>
                            </div>
                            <div class="stat">
                                <div class="stat-title">Remaining</div>
                                <div
                                    class="stat-value text-info"
                                    id="learnRemaining"
                                >
                                    0
                                </div>
                            </div>
                        </div>

                        <p class="text-lg text-base-content/70 mb-6">
                            You're about to learn
                            <span id="learnBatchSize" class="font-bold">5</span>
                            new kanji.
                        </p>

                        <div class="card-actions justify-center gap-2">
                            <button
                                id="startLearnBatchLessons"
                                class="btn btn-accent btn-lg"
                            >
                                Start Lessons
                            </button>
                            <button
                                id="exitLearnModeFromProgress"
                                class="btn btn-outline btn-lg"
                            >
                                Exit Learning Mode
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="learnQuizCompletionArea" class="hidden mt-6">
                <div class="card bg-base-100 shadow-xl">
                    <div class="card-body text-center">
                        <div class="badge badge-accent badge-lg mb-2">
                            Learning Mode
                        </div>
                        <h2 class="card-title text-3xl mb-4 justify-center">
                            Quiz Complete!
                        </h2>

                        <div
                            class="stats stats-vertical lg:stats-horizontal shadow mb-6"
                        >
                            <div class="stat">
                                <div class="stat-title">Total Questions</div>
                                <div
                                    class="stat-value text-primary"
                                    id="learnTotalQuestions"
                                >
                                    0
                                </div>
                            </div>
                            <div class="stat">
                                <div class="stat-title">
                                    Correct (First Try)
                                </div>
                                <div
                                    class="stat-value text-success"
                                    id="learnCorrectAnswers"
                                >
                                    0
                                </div>
                            </div>
                            <div class="stat">
                                <div class="stat-title">
                                    Incorrect (At Least Once)
                                </div>
                                <div
                                    class="stat-value text-error"
                                    id="learnIncorrectAnswers"
                                >
                                    0
                                </div>
                            </div>
                        </div>

                        <p class="text-lg text-base-content/70 mb-6">
                            <span id="learnProgressMessage"></span>
                        </p>

                        <div
                            class="card-actions justify-center gap-2 flex-wrap"
                        >
                            <button
                                id="continueLearnKanji"
                                class="btn btn-accent btn-lg"
                            >
                                Continue Learning
                            </button>
                            <button
                                id="redoLearnQuiz"
                                class="btn btn-warning btn-lg"
                            >
                                Redo Quiz
                            </button>
                            <button
                                id="exitLearnModeFromQuiz"
                                class="btn btn-outline btn-lg"
                            >
                                Exit Learning Mode
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Kanji Results Card -->
                <div class="card bg-base-100 shadow-xl mt-4">
                    <div class="card-body">
                        <h3 class="card-title text-xl mb-4 justify-center">
                            Kanji Results
                        </h3>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                            <!-- Correct Kanji -->
                            <div
                                class="card bg-success/10 border border-success/20"
                            >
                                <div class="card-body p-4">
                                    <h4
                                        class="card-title text-success text-lg mb-3"
                                    >
                                        Correct Kanji
                                    </h4>
                                    <div
                                        id="learnCorrectKanjiList"
                                        class="text-sm max-h-64 overflow-y-auto"
                                    >
                                        <!-- Will be populated by JavaScript -->
                                    </div>
                                </div>
                            </div>

                            <!-- Incorrect Kanji -->
                            <div
                                class="card bg-error/10 border border-error/20"
                            >
                                <div class="card-body p-4">
                                    <h4
                                        class="card-title text-error text-lg mb-3"
                                    >
                                        Incorrect Kanji
                                    </h4>
                                    <div
                                        id="learnIncorrectKanjiList"
                                        class="text-sm max-h-64 overflow-y-auto"
                                    >
                                        <!-- Will be populated by JavaScript -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="learningCompleteArea" class="hidden mt-6">
                <div class="card bg-base-100 shadow-xl">
                    <div class="card-body text-center">
                        <div class="badge badge-accent badge-lg mb-2">
                            Learning Mode
                        </div>
                        <h2 class="card-title text-3xl mb-4 justify-center">
                            All Kanji Learned!
                        </h2>

                        <p class="text-lg text-base-content/70 mb-6">
                            Congratulations! You've completed all
                            <span id="totalLearnedKanji" class="font-bold"
                                >0</span
                            >
                            kanji in learning mode.
                        </p>

                        <div class="card-actions justify-center gap-2">
                            <button
                                id="finalQuizAllLearned"
                                class="btn btn-accent btn-lg"
                            >
                                Final Quiz (All Kanji)
                            </button>
                            <button
                                id="backToSetupFromLearningComplete"
                                class="btn btn-outline btn-lg"
                            >
                                Back to Setup
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Toast container -->
        <div id="toast-container" class="toast toast-top toast-end"></div>

        <!-- Load JavaScript modules -->
        <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.8/dist/purify.min.js"></script>
        <script src="js/romanji-converter.js"></script>
        <script src="js/api.js"></script>
        <script src="js/cross-mode-validation.js"></script>
        <script src="js/quiz-core.js"></script>
        <script src="js/lesson-core.js"></script>
        <script src="js/learn-kanji-core.js"></script>
        <script src="js/ui-utils.js"></script>
        <script src="js/event-handlers.js"></script>
    </body>
</html>
